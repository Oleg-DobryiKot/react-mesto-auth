{"version":3,"sources":["images/logo/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/ImagePopup.js","utils/api.js","components/ProtectedRoute.js","contexts/ErrorMessageContext.js","components/AddPlacePopup.js","utils/auth.js","components/Register.js","components/Login.js","images/logo/logo-res.svg","images/logo/logo-rej.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","loggedIn","onLoggedOut","userData","location","useLocation","useState","routePath","routeName","navbar","setNavbar","useEffect","pathname","className","src","logo","alt","email","to","onClick","CurrentUserContext","createContext","Card","onCardClick","onCardLike","onCardDelete","link","name","likes","owner","_id","currentUser","useContext","isOwn","isLiked","some","item","cardDeleteButtonClassName","cardLikeButtonClassName","type","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","about","map","card","Footer","props","PopupWithForm","title","submitText","children","isOpen","onClose","onSubmit","noValidate","EditProfilePopup","onUpdateUser","setName","description","setDescription","event","preventDefault","value","onChange","target","placeholder","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","ImagePopup","api","login","this","_server","server","_auth","auth","_cohort","cohort","_path","request","then","res","ok","json","Promise","reject","status","fetch","method","headers","authorization","_handleResponse","data","body","JSON","stringify","cardId","ProtectedRoute","Component","component","ErrorMessageContext","message","setErrorMessage","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","BASE_URL","responseCheck","response","Register","onRegister","onShowTooltip","initialData","password","setData","history","useHistory","localStorage","getItem","push","handleChange","resetForm","handleSubmit","catch","err","id","Login","onLogin","setMessage","InfoTooltip","isRegistered","TooltipMessage","TooltipLogo","logoResolve","logoReject","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isTooltipOpen","setIsTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setLoggedIn","setIsRegistered","setCards","errorMessageState","setErrorMessageState","tokenCheck","getInitialCards","console","error","getUserInfo","info","token","jwt","closeAllPopups","Provider","removeItem","exact","path","changeLikeCardStatus","newCard","newCards","cardItem","deleteCard","filter","statusCode","Error","setItem","UserData","sendUserInfo","CardData","addNewCard","editAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.523c0fb7.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo/logo.svg';\r\nimport './styles/Header.css';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\nfunction Header({ loggedIn, onLoggedOut, userData }) {\r\n  const location = useLocation();\r\n  const [navbar, setNavbar] = useState({routePath: \"/sign-in\", routeName: 'Войти'}) \r\n\r\n  useEffect(() => {\r\n    (location.pathname === \"/sign-up\") ? setNavbar({routePath: \"/sign-in\", routeName: 'Войти'}) : setNavbar({routePath: \"/sign-up\", routeName: 'Регистрация'})  \r\n   }, [location]);\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <img\r\n        className=\"header__logo\"\r\n        src={logo}\r\n        alt=\"Логотип\"\r\n      />\r\n      <ul className=\"header__navbar\">\r\n        {userData.email === '' && \r\n        <li className=\"header__navbar-links\"><Link to={navbar.routePath} className=\"header__navbar-link\">{navbar.routeName}</Link></li>}\r\n        {loggedIn && <li className=\"header__navbar-links\"><Link to=\"/\" className=\"header__navbar-link\">{userData.email}</Link></li>}\r\n        {loggedIn && <li className=\"header__navbar-links\"><Link to=\"/sign-in\" className=\"header__navbar-link\" onClick={ onLoggedOut } >Выйти</Link></li>}\r\n      </ul>\r\n    </header>  \r\n  )\r\n}\r\n\r\nexport default Header;","import { createContext } from 'react';\r\n\r\nexport const CurrentUserContext = createContext();\r\n","import { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({onCardClick, onCardLike, onCardDelete, link, name, likes, owner, _id}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const isOwn = owner._id === currentUser._id;\r\n  const isLiked = likes.some(item => item._id === currentUser._id);\r\n  const cardDeleteButtonClassName = (\r\n    `element__trash-icon ${isOwn ? 'element__trash-icon_visible' : 'element__trash-icon_hidden'}`\r\n  );\r\n  const cardLikeButtonClassName = (\r\n    `element__like-icon ${isLiked ? 'element__like-icon_active' : ''}`); \r\n\r\n  function handleClick() {\r\n    onCardClick({link, name});\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike({_id, name, link, likes, owner})\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete({_id, name, link, likes, owner});\r\n  }\r\n\r\n  return (\r\n    <div className=\"element\">\r\n      <img \r\n        className=\"element__image\"\r\n        src={ link }\r\n        alt={ name }\r\n        onClick={ handleClick }\r\n      />\r\n      <div className=\"element__description\">\r\n        <h3 className=\"element__title\">{ name }</h3>\r\n        <button \r\n          type=\"button\" \r\n          className={ cardDeleteButtonClassName }\r\n          onClick={ handleDeleteClick }\r\n        >\r\n        </button>\r\n        <div className=\"element__likes\">\r\n          <button \r\n            type=\"button\" \r\n            className={ cardLikeButtonClassName }\r\n            onClick={ handleLikeClick }\r\n          >\r\n          </button>\r\n          <span className=\"element__like-count\">{ likes.length }</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Card;","import Card from './Card';\r\nimport { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, onCardLike, onCardDelete, cards}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__overlay\" onClick={ onEditAvatar }>\r\n          <img \r\n            className=\"profile__avatar\" \r\n            src={ currentUser.avatar } \r\n            alt=\"Фото профиля\"\r\n          />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__edit\">\r\n            <h1 className=\"profile__title\">{ currentUser.name }</h1>\r\n            <button \r\n              type=\"button\" \r\n              className=\"profile__edit-btn\"\r\n              onClick={ onEditProfile }>  \r\n            </button>\r\n          </div>\r\n          <p className=\"profile__description\">{ currentUser.about }</p>\r\n        </div>\r\n        <button \r\n          type=\"button\" \r\n          className=\"profile__add-btn\"\r\n          onClick={ onAddPlace }> \r\n        </button>\r\n      </section>\r\n\r\n      <section className=\"elements\">\r\n        {cards.map((card) => (\r\n          <Card \r\n            key={ card._id }\r\n            { ...card } \r\n            onCardClick={ onCardClick } \r\n            onCardLike={ onCardLike }\r\n            onCardDelete={ onCardDelete }\r\n          />\r\n          )\r\n        )}\r\n      </section>\r\n\r\n    </main>\r\n  )\r\n}\r\n  \r\nexport default Main;","function Footer(props) {\r\n  return(\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020. Матвеев Олег</p>\r\n    </footer>   \r\n  )\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction PopupWithForm({title, name, submitText='Сохранить', children, isOpen, onClose, onSubmit}) {\r\n  return (\r\n    <section className={ `popup popup_type-${name} ${ isOpen ? 'popup_is-opened' : '' }` }>\r\n      <div className=\"popup__container\">\r\n        <button onClick={ onClose } type=\"button\" className=\"popup__close\"></button>\r\n        <h3 className=\"popup__title\">{title}</h3>\r\n        <form \r\n          name={ name }\r\n          className={`popup__input-form popup__input-form_type-${name}`}\r\n          onSubmit={ onSubmit }\r\n          noValidate>\r\n            { children }\r\n            <button \r\n              type=\"submit\"\r\n              className={`popup__input-btn popup__input-btn_type-${name}`}>\r\n              { submitText }\r\n            </button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport 'react-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  function handleNameChange(event) {\r\n    setName(event.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(event) {\r\n    setDescription(event.target.value);\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    onUpdateUser({\r\n      name: name,\r\n      about: description\r\n    });\r\n  } \r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name || '');\r\n    setDescription(currentUser.about || '');\r\n  }, [currentUser]); \r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={ isOpen }\r\n      onClose={ onClose }\r\n      onSubmit={ handleSubmit }\r\n    >\r\n    <input\r\n      type=\"text\"\r\n      value={ name }\r\n      onChange={ handleNameChange }\r\n      placeholder=\"Имя\"\r\n      name=\"name\"\r\n      className=\"popup__input-text popup__input-text_name\"\r\n      minLength=\"2\"\r\n      maxLength=\"40\"\r\n      required\r\n    />\r\n    <span className=\"popup__error popup__error_name\">Введите имя</span>\r\n    <input\r\n      type=\"text\"\r\n      value={ description }\r\n      onChange={ handleDescriptionChange }\r\n      placeholder=\"Род занятий\"\r\n      name=\"description\"\r\n      className=\"popup__input-text popup__input-text_description\"\r\n      minLength=\"2\"\r\n      maxLength=\"200\"\r\n      required\r\n    />\r\n    <span className=\"popup__error popup__error_description\">Введите род занятий</span>\r\n  </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport 'react-dom';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n  const avatarRef = useRef();\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: avatarRef.current.value\r\n    });\r\n  } \r\n\r\n  return (\r\n    <PopupWithForm \r\n      name=\"update-avatar\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={ isOpen }\r\n      onClose={ onClose }\r\n      onSubmit={ handleSubmit }\r\n  >\r\n    <input \r\n      type=\"url\"\r\n      placeholder=\"Ссылка на аватарку...\"\r\n      name=\"avatar\"\r\n      ref={ avatarRef }\r\n      className=\"popup__input-text\"\r\n      required\r\n    />\r\n    <span className=\"popup__error popup__error_avatar\">Введите URL аватарки</span>\r\n  </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","function ImagePopup({isOpen, onClose, card}) {\r\n  return (\r\n    <section className={ `popup popup_type-image ${ isOpen ? 'popup_is-opened' : '' }`}>\r\n    <div className=\"popup__container popup__container_type-image\">\r\n      <button onClick={ onClose } type=\"button\" className=\"popup__close\"></button>\r\n      <img className=\"popup__fullpic\" src={ card.link } alt={ card.name }/>\r\n      <h3 className=\"popup__title popup__title_type-image\">{ card.name }</h3>\r\n    </div>\r\n  </section>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","class Api {\r\n  constructor(login) {\r\n    this._server = login.server;\r\n    this._auth = login.auth;\r\n    this._cohort = login.cohort;\r\n    this._path = `${this._server}${this._cohort}`;\r\n  }\r\n\r\n  _handleResponse(request) {\r\n    return request.then(res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getInitialCards() {\r\n    const request = fetch(`${this._path}/cards`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._auth\r\n      }\r\n    });\r\n    return this._handleResponse(request);\r\n  }\r\n\r\n  getUserInfo() {\r\n    const request = fetch(`${this._path}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._auth,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    return this._handleResponse(request);\r\n  }\r\n\r\n  sendUserInfo(data) {\r\n    const request = fetch(`${this._path}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._auth,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about\r\n      })\r\n    })\r\n    return this._handleResponse(request);\r\n  }\r\n\r\n  addNewCard(data) {\r\n    const request = fetch(`${this._path}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._auth,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link\r\n      })\r\n    })\r\n    return this._handleResponse(request);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    const request = fetch(`${this._path}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._auth,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    })\r\n    return this._handleResponse(request);\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    const request = fetch(`${this._path}/cards/likes/${cardId}`, {\r\n      method: isLiked ? 'PUT':'DELETE',\r\n      headers: {\r\n        authorization: this._auth,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    })\r\n    return this._handleResponse(request);\r\n  }\r\n\r\n  likeCard(cardId) {\r\n    const request = fetch(`${this._path}/cards/likes/${cardId}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        authorization: this._auth,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    })\r\n    return this._handleResponse(request);\r\n  }\r\n\r\n  unlikeCard(cardId) {\r\n    const request = fetch(`${this._path}/cards/likes/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._auth,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    })\r\n    return this._handleResponse(request);\r\n  }\r\n\r\n  editAvatar(data) {\r\n    const request = fetch(`${this._path}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._auth,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: data.avatar\r\n      })\r\n    })\r\n    return this._handleResponse(request);\r\n  }\r\n}\r\n\r\nconst login = {\r\n  \"server\": \"https://mesto.nomoreparties.co/v1/\",\r\n  \"auth\": \"ca5f4285-decb-4fbb-b094-52f199996ef3\",\r\n  \"cohort\": \"cohort-19\"\r\n}\r\n\r\nconst api = new Api(login);\r\nexport default api;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;","import { createContext } from 'react';\r\n\r\nexport const ErrorMessageContext = createContext({\r\n    message: '',\r\n    setErrorMessage() {},\r\n});\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useState, useContext } from 'react';\r\nimport 'react-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\r\n  const [placeName, setPlaceName] = useState('');\r\n  const [placeLink, setPlaceLink] = useState('');\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  function handlePlaceNameChange(event) {\r\n    setPlaceName(event.target.value);\r\n  }\r\n\r\n  function handlePlaceLinkChange(event) {\r\n    setPlaceLink(event.target.value);\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    onAddPlace({\r\n      name: placeName,\r\n      link: placeLink\r\n    });\r\n  } \r\n\r\n  return (\r\n    <PopupWithForm \r\n      name=\"card\"\r\n      title=\"Новое место\"\r\n      isOpen={ isOpen }\r\n      onClose={ onClose }\r\n      onSubmit={ handleSubmit }\r\n    >\r\n    <input \r\n      type=\"text\"\r\n      value={ placeName }\r\n      onChange={ handlePlaceNameChange }\r\n      placeholder=\"Название\"\r\n      name=\"name\"\r\n      className=\"popup__input-text popup__input-text_title\"\r\n      minLength=\"2\"\r\n      maxLength=\"30\"\r\n      required\r\n    />\r\n    <span className=\"popup__error popup__error_name\">Заполните это поле</span>\r\n    <input \r\n      type=\"url\"\r\n      value={ placeLink }\r\n      onChange={ handlePlaceLinkChange }\r\n      placeholder=\"Сыылка на картинку\"\r\n      name=\"link\"\r\n      className=\"popup__input-text popup__input-text_link\"\r\n      required\r\n    />\r\n    <span className=\"popup__error popup__error_link\">Введите URL картинки</span>\r\n  </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nconst responseCheck = (response) => response.ok ? response.json() : Promise.reject(`Ошибка ${response.status}`);\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n  .then(responseCheck);\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n  .then(responseCheck);\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n  .then(responseCheck);\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { ErrorMessageContext } from '../contexts/ErrorMessageContext';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport './styles/Register.css';\r\n\r\nexport default function Register({ onRegister, onShowTooltip }) {\r\n  const initialData = {\r\n    password: '',\r\n    email: ''\r\n  };\r\n\r\n  const [data, setData] = useState(initialData);\r\n  const { setErrorMessage } = useContext(ErrorMessageContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('jwt')) {\r\n      history.push('/');\r\n    }\r\n  },[history])\r\n\r\n  const handleChange = (event) => {\r\n    const {name, value} = event.target;\r\n    setData(data => ({\r\n      ...data,\r\n      [name]: value,\r\n    }));\r\n  }\r\n\r\n  const resetForm = () => {\r\n    setData(initialData);\r\n    setErrorMessage('');\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n      \r\n    if (!data.email || !data.password) {\r\n        onShowTooltip();\r\n        return;\r\n      }\r\n\r\n    onRegister(data)\r\n      .then(onShowTooltip())\r\n      .then(resetForm)\r\n      .then(() => history.push('/sign-in'))\r\n      .catch(err => setErrorMessage(err.message || 'Что-то пошло не так!'));\r\n  }\r\n  \r\n  return (\r\n    <div className=\"register\">\r\n      <p className=\"register__welcome\">\r\n        Регистрация\r\n      </p>\r\n\r\n      <form onSubmit={handleSubmit} className=\"register__form\">\r\n        <input className=\"register__input\" id=\"email\" name=\"email\" type=\"email\" placeholder=\"Email:\" value={data.email} onChange={handleChange} />\r\n        <input className=\"register__input\" id=\"password\" name=\"password\" type=\"password\" placeholder=\"Пароль:\" value={data.password} onChange={handleChange} />\r\n        <div className=\"register__button-container\">\r\n            <button type=\"submit\" onSubmit={handleSubmit} className=\"register__button-submit\">Зарегистрироваться</button>\r\n        </div>\r\n      </form>\r\n\r\n      <div className=\"register__signin\">\r\n        <p>Уже зарегистрированы? \r\n          <Link to=\"/sign-in\" className=\"register__link\">Войти</Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport './styles/Login.css';\r\n\r\nexport default function Login({ onLogin }) {\r\n \r\n  const initialData = {\r\n    password: '',\r\n    email: ''\r\n  }\r\n  const [data, setData] = useState(initialData);\r\n  const [message, setMessage] = useState('');\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('jwt')) {\r\n      history.push('/');\r\n    }\r\n  },[history])\r\n\r\n  const handleChange = (event) => {\r\n    const {name, value} = event.target;\r\n    setData(data => ({\r\n      ...data,\r\n      [name]: value,\r\n    }));\r\n  }\r\n\r\n  const resetForm = () => {\r\n    setData(initialData);\r\n    setMessage('');\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    \r\n    if (!data.email || !data.password) {\r\n      return;\r\n    }\r\n    \r\n    onLogin(data)\r\n      .then(resetForm)\r\n      .then(() => history.push('/'))\r\n      .catch(err => setMessage(err.message || 'Что-то пошло не так!'));\r\n  }\r\n\r\n    return(\r\n      <div className=\"login\">\r\n        <p className=\"login__welcome\">\r\n          Вход\r\n        </p>\r\n        <form onSubmit={handleSubmit} className=\"login__form\">\r\n          <input className=\"login__input\" placeholder=\"Email:\" required id=\"email\" name=\"email\" type=\"text\" value={data.email} onChange={handleChange} />\r\n          <input className=\"login__input\" placeholder=\"Пароль:\" required id=\"password\" name=\"password\" type=\"password\" value={data.password} onChange={handleChange} />\r\n          <div className=\"login__button-container\">\r\n            <button type=\"submit\" onSubmit={handleSubmit} className=\"login__button-submit\">Войти</button>\r\n          </div>\r\n        </form>\r\n\r\n        <div className=\"login__signup\">\r\n          <p>Ещё не зарегистрированы? \r\n          <Link to=\"/sign-up\" className=\"login__signup-link\">Регистрация</Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\n// Login;\r\n","export default __webpack_public_path__ + \"static/media/logo-res.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/logo-rej.df8eddf6.svg\";","import logoResolve from '../images/logo/logo-res.svg';\r\nimport logoReject from '../images/logo/logo-rej.svg';\r\nimport './styles/InfoTooltip.css';\r\nimport React, { useContext } from 'react';\r\nimport 'react-dom';\r\nimport { ErrorMessageContext } from '../contexts/ErrorMessageContext';\r\n\r\nfunction InfoTooltip({isOpen, onClose, isRegistered}) {\r\n  const { message } = useContext(ErrorMessageContext);\r\n\r\n  const TooltipMessage = isRegistered ? 'Вы успешно зарегестрировались!' : (message || 'Что-то пошло не так!');\r\n  const TooltipLogo = isRegistered ? logoResolve : logoReject;\r\n\r\n  return (\r\n    <section className={ `popup ${ isOpen ? 'popup_is-opened' : '' }` }>\r\n      <div className=\"tooltip__container\">\r\n        <button onClick={ onClose } type=\"button\" className=\"popup__close\"></button>\r\n          <img\r\n            className=\"tooltip__icon\"\r\n            src={TooltipLogo}\r\n            alt=\"Успешный логин\"\r\n          /> \r\n        <h3 className=\"tooltip__title\">{ TooltipMessage }</h3> \r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;","import './styles/App.css';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport api from '../utils/api';\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport 'react-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { ErrorMessageContext } from '../contexts/ErrorMessageContext';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport * as auth from '../utils/auth';\r\nimport Register from './Register';\r\nimport Login from './Login';\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\nfunction App() {\r\n  const initialData = {email: '', password: ''};\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n  const [isTooltipOpen, setIsTooltipOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [isRegistered, setIsRegistered] = useState(false);\r\n  const [data, setData] = useState(initialData);\r\n  const [cards, setCards] = useState([]);\r\n  const [errorMessageState, setErrorMessageState]  = useState('');\r\n  const history = useHistory();\r\n  \r\n  useEffect(() => {\r\n// debugger;\r\n    tokenCheck();\r\n\r\n    api.getInitialCards()\r\n      .then(res => {\r\n        const cards = res.map(card => {\r\n          return {\r\n            _id: card._id,\r\n            name: card.name,\r\n            link: card.link,\r\n            likes: card.likes,\r\n            owner: card.owner\r\n          }\r\n        })\r\n        setCards(cards);\r\n      })\r\n      .catch(console.error);\r\n\r\n    api.getUserInfo()\r\n      .then(info => {\r\n        setCurrentUser(info);\r\n      })\r\n      .catch(console.error);\r\n  }, [])\r\n\r\n  const tokenCheck = () => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      auth.checkToken(jwt)\r\n        .then(res => {\r\n          if (res) {\r\n            // debugger;\r\n            setData({email: res.data.email});\r\n            setLoggedIn(true);\r\n          }\r\n        })\r\n        .catch(() => { history.push('/sign-in') });\r\n    }\r\n    else {\r\n      history.push('/sign-in');\r\n    }\r\n  }\r\n\r\n  function handleLogin({email, password}) {\r\n    return auth.authorize(email, password)\r\n      .then(res => {\r\n        if (!res || res.statusCode === 400) throw new Error('Что то пошло не так!')\r\n        if (res.statusCode === 401) throw new Error('Нет пользователя с таким e-mail...');\r\n        if (res.token) {\r\n          setLoggedIn(true);\r\n          setData({email, password});\r\n          localStorage.setItem('jwt', res.token);\r\n        }\r\n      });\r\n  }\r\n\r\n  function handleRegister({email, password}) {\r\n    return auth.register(email, password)\r\n      .then(res => {\r\n        if (!res || res.statusCode === 400) setIsRegistered(false);\r\n        setIsRegistered(true);\r\n        return res;\r\n      })\r\n      .catch()\r\n  }\r\n\r\n  function handleLoggedOut() {\r\n    localStorage.removeItem('jwt');\r\n    setData(initialData);\r\n    setLoggedIn(false);\r\n    history.push('/sign-in');\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(item => item._id === currentUser._id);\r\n    api.changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map(cardItem => cardItem._id === card._id ? newCard : cardItem);\r\n        setCards(newCards)\r\n      })\r\n      .catch(console.error);\r\n  } \r\n\r\n  function handleCardDelete(card) {\r\n    const isOwner = card.owner._id === currentUser._id;\r\n\r\n    if (!isOwner) {\r\n      return;\r\n    }\r\n\r\n    api.deleteCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter(({ _id }) => _id !== card._id);\r\n        setCards(newCards)\r\n      })\r\n      .catch(console.error);\r\n  } \r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n  \r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n  \r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setIsImagePopupOpen(true);\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function handleUpdateUser(UserData) {\r\n    api.sendUserInfo(UserData)\r\n      .then(setCurrentUser)\r\n      .catch(console.error);\r\n    setIsEditProfilePopupOpen(false);\r\n  }\r\n\r\n  function handleUpdateAvatar(UserData) {\r\n    api.editAvatar(UserData)\r\n      .then(setCurrentUser)\r\n      .catch(console.error);\r\n    setIsEditAvatarPopupOpen(false);\r\n  }\r\n\r\n  function handleShowTooltip() {\r\n    setIsTooltipOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceSubmit(CardData) {\r\n    api.addNewCard(CardData)\r\n      .then(res => {setCards([res, ...cards])})\r\n      .catch(console.error);\r\n    setIsAddPlacePopupOpen(false);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n    setIsTooltipOpen(false);\r\n    setSelectedCard({});\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <CurrentUserContext.Provider value={currentUser}>       \r\n      <ErrorMessageContext.Provider value={{ message: errorMessageState, setErrorMessage: message => setErrorMessageState(message) }}>       \r\n\r\n        <Header loggedIn={loggedIn} onLoggedOut={ handleLoggedOut } userData={ data }/>\r\n          <Switch>\r\n            <ProtectedRoute exact path=\"/\" \r\n              onEditProfile={ handleEditProfileClick }\r\n              onAddPlace={ handleAddPlaceClick }\r\n              onEditAvatar={ handleEditAvatarClick }\r\n              onCardClick={ handleCardClick }\r\n              onCardLike={ handleCardLike }\r\n              onCardDelete={ handleCardDelete }\r\n              cards={ cards }\r\n              loggedIn={ loggedIn }\r\n              component={ Main }\r\n            />\r\n            <Route path=\"/sign-up\">\r\n              <Register \r\n              onRegister={ handleRegister }\r\n              onShowTooltip={ handleShowTooltip }\r\n            />\r\n            </Route>\r\n            <Route path=\"/sign-in\">\r\n              <Login onLogin={ handleLogin } />\r\n            </Route>\r\n            <Route exact path=\"/\">\r\n              {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\r\n            </Route>\r\n          </Switch>\r\n      <Footer/>\r\n      <EditProfilePopup \r\n        isOpen={ isEditProfilePopupOpen }\r\n        onClose={ closeAllPopups }\r\n        onUpdateUser={ handleUpdateUser }\r\n      /> \r\n      <AddPlacePopup\r\n        isOpen={ isAddPlacePopupOpen }\r\n        onClose={ closeAllPopups }\r\n        onAddPlace={ handleAddPlaceSubmit }\r\n      />\r\n      <PopupWithForm \r\n        name=\"delete\"\r\n        title=\"Вы уверены?\"\r\n        submitText=\"Да\"\r\n        onClose={ closeAllPopups }\r\n      />\r\n      <EditAvatarPopup \r\n        isOpen={ isEditAvatarPopupOpen }\r\n        onClose={ closeAllPopups }\r\n        onUpdateAvatar={ handleUpdateAvatar }\r\n      />\r\n      <ImagePopup \r\n        card={ selectedCard }\r\n        isOpen={ isImagePopupOpen }\r\n        onClose={ closeAllPopups }\r\n      />\r\n      <InfoTooltip \r\n        isOpen={ isTooltipOpen }\r\n        onClose={ closeAllPopups }\r\n        isRegistered = {isRegistered}\r\n      />\r\n      </ErrorMessageContext.Provider>\r\n      </CurrentUserContext.Provider>\r\n  </div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}